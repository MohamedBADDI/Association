{% extends "BenAssociationBundle::layout.html.twig" %}
{% block title %}
Tableau de bord | {{ parent() }}
{% endblock %}
{% block body %}
<h2><span class="glyphicon glyphicon-file"></span> Reservation</h2>
<form id="createForm" class="form-horizontal" action="{{ path('reservation_update', { 'id': entity.id }) }}" method="post" {{ form_enctype(form) }}>
    {% include "BenAssociationBundle:Reservation:form.html.twig" %}

    <div class="form-group">
      <div class="col-md-offset-4 col-md-4">
        <button type="submit" class="btn btn-primary btn-embossed"><span class="glyphicon glyphicon-edit"></span> Modifier</button>
        <button id="js-delete" class="btn btn-embossed btn-danger"><span class="fui-cross"></span> Supprimer </button>
      </div>
    </div>
            
</form>

<form id="deleteForm" action="{{ path('reservation_delete', { 'id': entity.id }) }}" method="post">
    {{ form_widget(delete_form) }}
</form>

{% endblock body %}

{% block javascripts %}
{{ parent() }}
<script> 
    (function($) {
        var roomInput = $('#ben_reservationtype_room'),
        jsroom = $('#js-room'),
        jsblock = $('#js-block'),
        closeBtn = $('#infoModal').find('.close');

    roomInput.closest('.form-group').hide().prev().hide();
    $('#dataContainer').on('click', '.js-check', function(){
      var id = $(this).data('id'),
          data = $(this).closest('tr').find('td');
      roomInput.val(id);
      jsroom.val(data[0].innerHTML);
      jsblock.val(data[2].innerHTML);
      closeBtn.trigger('click');
    });


        $('#js-delete').on('click', function(){
            $('#deleteForm').submit();
            return false;
        });

    })(jQuery);
</script>
{% endblock %}
