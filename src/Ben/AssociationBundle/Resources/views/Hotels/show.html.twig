{% extends "BenAssociationBundle::layout.html.twig" %}
{% block title %}
Tableau de bord | {{ parent() }}
{% endblock %}
{% block body %}
<h2><span class="fui-home"></span> Logement: {{ entity.name }}</h2>
<div class="row">
    <div class="col-sm-9">
<table class="table table-hover table-bordered">
    <tbody>
        <tr>
            <th>Id</th>
            <td>{{ entity.id }}</td>
        </tr>
        <tr>
            <th>Name</th>
            <td>{{ entity.name }}</td>
        </tr>
        <tr>
            <th>Category</th>
            <td>{{ entity.category }}</td>
        </tr>
        <tr>
            <th>Address</th>
            <td>{{ entity.address }}</td>
        </tr>
        <tr>
            <th>City</th>
            <td>{{ entity.city }}</td>
        </tr>
        <tr>
            <th>Post_code</th>
            <td>{{ entity.postcode }}</td>
        </tr>
        <tr>
            <th>Description</th>
            <td>{{ entity.description }}</td>
        </tr>
    </tbody>
</table>
<h2><span class="fui-tag"></span> Liste des chambres dans ce logement</h2>
<div class="room-widget col-md-12">
    {% for item in entity.rooms %}
        <div class="col-md-2 floor{{ item.floor }}" data-floor="{{ item.floor }}"><a href="{{ path('rooms_show', { 'id': item.id }) }}" class="btn btn-{% if item.isFree %}success{% else %}default{% endif %} btn-block">{{ item.number }} </a></div>
    {% endfor %}
</div>

</div> 
<div class="col-md-3">
    <form action="{{ path('hotels_delete', { 'id': entity.id }) }}" method="post" class="well">
    {{ form_widget(delete_form) }}
    <a id="submitEditForm" class="btn btn-embossed btn-primary btn-block" href="{{ path('hotels_edit', { 'id': entity.id }) }}">
        <span class="fui-new"></span> Mettre à jour
    </a>
    <a class="btn btn-embossed btn-inverse btn-block " href="{{ path('hotels') }}">
        <span class="fui-list-bulleted"></span> Back to the list
    </a>
    <button type="submit" class="btn btn-embossed btn-danger btn-block"><span class="fui-cross"></span> Supprimer </button>
</form>
</div>
</div>
{% endblock body %}
{% block javascripts %}
{{ parent() }}
<script> 
    (function($) {
        var roomWidget = $('.room-widget'),
            rooms = roomWidget.children();

        rooms.sort(function(a,b){
            var an = a.getAttribute('data-floor'),
                bn = b.getAttribute('data-floor');

            if(an > bn) {
                return 1;
            }
            if(an < bn) {
                return -1;
            }
            return 0;
        });

        rooms.detach().appendTo(roomWidget);
        for (var i = 0; i < 6; i++)
            $('.floor'+i).wrapAll('<div class="row"></div>').parent().prepend('<div class="col-md-12"><p class="bg-info">Etage N°'+i+'</p></div>');
    })(jQuery);
</script>
{% endblock %}
